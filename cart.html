<!DOCTYPE html>
<html>
<head>
  <title>Your Cart</title>
  <link rel="stylesheet" href="style.css">
  <script src="products.js"></script>
</head>
<body>
  <div class="container">
    <h1>Your Cart</h1>
    <div id="cartItems"></div>
    <p>Total: ₹<span id="cartTotal">0</span></p>
    <a href="checkout.html" onclick="saveCartTotal()">Proceed to Checkout</a>
  </div>
  <script>
    // Load cart from localStorage or initialize empty
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    // Display cart items
    const cartItemsDiv = document.getElementById("cartItems");
    const cartTotalSpan = document.getElementById("cartTotal");
    
    function renderCart() {
      cartItemsDiv.innerHTML = "";
      let total = 0;
      cart.forEach((item, index) => {
        const product = products.find((p) => p.name === item.name);
        if (product) {
          const itemTotal = product.basePrice * item.quantity;
          total += itemTotal;
          cartItemsDiv.innerHTML += `
            <div>
              <p>${product.name} (Qty: ${item.quantity}) - ₹${itemTotal}</p>
              <button onclick="updateQuantity(${index}, -1)">-</button>
              <button onclick="updateQuantity(${index}, 1)">+</button>
              <button onclick="removeFromCart(${index})">Remove</button>
            </div>
          `;
        }
      });
      cartTotalSpan.textContent = total;
    }

    // Update quantity
    function updateQuantity(index, change) {
      cart[index].quantity += change;
      if (cart[index].quantity <= 0) cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    // Remove item
    function removeFromCart(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    // Save total for checkout
    function saveCartTotal() {
      const total = parseFloat(cartTotalSpan.textContent) * 100; // Convert to paise
      localStorage.setItem("cartTotal", total);
    }

    // Initial render
    renderCart();
  </script>
</body>
</html>
